<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bootstrap-JS Calculator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />
    <style>
.calculator-body{
 margin: 10px 30px;
 background-color: grey;
}
.input-text{
    margin: 4px;
    border: 1px solid black;
}
.container{
    background-color: #e9ecef;
    
}
.clear-button{
    padding: 0;
}
.btn-clear{
    margin: 4px;
    height: 40px;
    width: 40px;
    
}
.btn-square {
    border-radius: 0;
    margin: 2px;
    height: 60px;
    width: 60px;
  }

   .btn-rect {
    border-radius: 0;
    margin: 2px;
    height: 60px;
    width: 100px;
  } 

  .btn-square:hover{
      color: white;
  }

  .btn-square:click{
    color: white;
}

    </style>
  </head>
  <body>
    <script>
     
        function createElement(element) {
           return document.createElement(element);
         }
         
         function append(element) {
           return document.body.append(element);
         }
         
         function appendChild(element, child) {
           return element.appendChild(child);
         }
         
         function setAttribute(element, attribute, value) {
           element.setAttribute(attribute, value);
         }</script>


     <script>


let container = createElement("div");
setAttribute(container, "class", "container");
append(container);


let row = createElement("div");
setAttribute(row, "class", "row");
appendChild(container, row);


let col1 = createElement("div");
setAttribute(col1, "class", "col-lg-4 col-md-12 col-sm-12 col-xs-12");
appendChild(row, col1);
let col2 = createElement("div");
setAttribute(col2, "class", "col-lg-4 col-md-12 col-sm-12 col-xs-12");
appendChild(row, col2);

let calcBody = createElement("div");
setAttribute(calcBody, "class", "calculator-body");
appendChild(col2, calcBody);

let inputRow = createElement("div");
setAttribute(inputRow, "class", "row");
appendChild(calcBody, inputRow);

let resultBox = createElement("div");
setAttribute(resultBox, "class", "col-12");
setAttribute(resultBox, 'style',"text-align: center;")
resultBox.innerHTML = 
`<button type="button" class="btn btn-warning btn-xs">
Result <span class="badge badge-light" id="result-box">0</span>
</button>`;
appendChild(inputRow, resultBox);

let textBoxCol = createElement("div");
setAttribute(textBoxCol, "class", "col-4");
textBoxCol.innerHTML = '<input type="text" name="" class="form-control input-text" id="input-box">';
appendChild(inputRow, textBoxCol);

let clearButton = createElement("div");
setAttribute(clearButton, "class", "col-2 clear-button");
clearButton.innerHTML = ' <button type="button" class="btn btn-primary btn-clear" id="clear">C</button>';
appendChild(inputRow, clearButton);

let btnGrp1 = createElement("div");
setAttribute(btnGrp1, "class", "btn-grp");
btnGrp1.innerHTML = 
`<button type="button" class="btn btn-dark btn-square" id="btn-7">7</button>
<button type="button" class="btn btn-dark btn-square" id="btn-8">8</button>
<button type="button" class="btn btn-dark btn-square" id="btn-9">9</button>
<button type="button" class="btn btn-danger btn-square" id="btn-operand" value="+">+</button>`;

appendChild(calcBody, btnGrp1);

let btnGrp2 = createElement("div");
btnGrp2.innerHTML = 
`<button type="button" class="btn btn-dark btn-square" id="btn-4">4</button>
<button type="button" class="btn btn-dark btn-square" id="btn-5">5</button>
<button type="button" class="btn btn-dark btn-square" id="btn-6">6</button>
<button type="button" class="btn btn-danger btn-square" id="btn-operand" value="-">-</button>`;

appendChild(calcBody, btnGrp2);

let btnGrp3 = createElement("div");
setAttribute(btnGrp3, "class", "btn-grp");
btnGrp3.innerHTML = 
`<button type="button" class="btn btn-dark btn-square" id="btn-1">1</button>
<button type="button" class="btn btn-dark btn-square" id="btn-2">2</button>
<button type="button" class="btn btn-dark btn-square" id="btn-3">3</button>
<button type="button" class="btn btn-danger btn-square" id="btn-operand" value="/">/</button>`;

appendChild(calcBody, btnGrp3);

let btnGrp4 = createElement("div");
setAttribute(btnGrp4, "class", "btn-grp");
btnGrp4.innerHTML = 
`<button type="button" class="btn btn-dark btn-square" id="btn-0">0</button>
<button type="button" class="btn btn-dark btn-square" id="btn-decimal">.</button>
<button type="button" class="btn btn-dark btn-square"  id="btn-equal" value="=">=</button>
<button type="button" class="btn btn-danger btn-square" id="btn-operand" value="*">*</button>`;

appendChild(calcBody, btnGrp4);

let col3 = createElement("div");
setAttribute(col3, "class", "col-lg-4 col-md-12 col-sm-12 col-xs-12");
appendChild(row, col3);


let inputNum = document.getElementById("input-box");
let displayVal = '';
let setResult = document.getElementById('result-box');

document.querySelector("#clear").addEventListener("click", function () {
    reset();
});

inputNum.addEventListener('keypress', function(event){
    console.log(event.keyCode);
    if(event.keyCode <47  || event.keyCode >58){
        alert('Only numbers are allowed');
        event.preventDefault();
        console.log(event);
        return false;
    }
});

function reset(){
    displayVal = '';
    inputNum.value = '';
    setResult.innerText = 0;
}
function convertResult(val){

    if(val.charCodeAt(0) >47 && val.charCodeAt(0) <57){
        displayVal = val;
        result = parseFloat(val);
    }
}

document.querySelector("#btn-1").addEventListener("click", function () {
    inputNum.value += "1";
    convertResult(inputNum.value);
});

document.querySelector("#btn-2").addEventListener("click", function () {
    inputNum.value += "2";
    convertResult(inputNum.value);
});
document.querySelector("#btn-3").addEventListener("click", function () {
    inputNum.value += "3";
    convertResult(inputNum.value);
});

document.querySelector("#btn-4").addEventListener("click", function () {
    inputNum.value += "4";
    convertResult(inputNum.value);
});

document.querySelector("#btn-5").addEventListener("click", function () {
    inputNum.value += "5";
    convertResult(inputNum.value);
});

document.querySelector("#btn-6").addEventListener("click", function () {
    inputNum.value += "6";
    convertResult(inputNum.value);
});

document.querySelector("#btn-7").addEventListener("click", function () {
    inputNum.value += "7";
    convertResult(inputNum.value);
});

document.querySelector("#btn-8").addEventListener("click", function () {
    inputNum.value += "8";
    convertResult(inputNum.value);
});

document.querySelector("#btn-9").addEventListener("click", function () {
    inputNum.value += "9";
    convertResult(inputNum.value);
});

document.querySelector("#btn-0").addEventListener("click", function () {
    inputNum.value += "0";
    convertResult(inputNum.value);
});

document.querySelector("#btn-decimal").addEventListener("click", function () {
    inputNum.value += ".";
    convertResult(inputNum.value);
});

let operandButtons = document.querySelectorAll("#btn-operand");

    operandButtons.forEach(function(ele){
        ele.addEventListener("click", function () {
            switch(ele.value) {
                case '+':
                    inputNum.value += ' + ';
                break;
                case '-':
                    inputNum.value += ' - ';
                break;
                case '/':
                    inputNum.value += ' / ';
                break;
                case '*':
                    inputNum.value += ' * ';
                break;
                default:
            
            }
        });
    });

document.querySelector("#btn-equal").addEventListener("click", function () {
    let operationArray = inputNum.value.split(' ');
    console.log(operationArray);
    let sum = parseFloat(operationArray[0]);
    
    for(let i=1; i<operationArray.length; i++){
        
        switch(operationArray[i-1]) {
            case '+':
                sum = sum + parseFloat(operationArray[i]);
              break;
            case '-':
                sum = sum - parseFloat(operationArray[i]);
              break;
            case '/':
                sum = sum / parseFloat(operationArray[i]);
              break;
            case '*':
                sum = sum * parseFloat(operationArray[i]);
              break;
            default:
            
          }
        

    }
    console.log(sum);
    setResult.innerText = sum;
    inputNum.value = '';
    storeinLocal(sum);
});

function storeinLocal(val){
    sessionStorage.setItem('sum', val);
}

     </script>

  </body>
</html>